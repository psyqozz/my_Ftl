/*
** ETNA PROJECT, 12/11/2018 by juzain_d
** player move
** File description:
**      ...
*/

#include "ftl.h"


void jump(ship_t *ship)
{
    srand(time(NULL));
    int percent = 30;
    int new_enemy;
    if (my_strcmp(ship->drive->system_state, "online") == 0) {
        if (ship->navigation_tools->enemy->here == 0) {
            ship->navigation_tools->sector = ship->navigation_tools->sector + 1;
            ship->drive->energy = ship->drive->energy - 1;
            ship->navigation_tools->detect = 0;
            my_putstr_color("green", "To infinity and beyond!\n");
            new_enemy = (rand() % 100);
            if(new_enemy >= percent)
                create_enemy(ship);
        } else
            my_putstr_color("red","[WARNING]: can not use jump, there is a new enemy\n");
    } else
        my_putstr_color("red","[SYSTEM FAILURE]: navigation tools out of order!\n");
}

void attack (ship_t *ship)
{
    srand(time(NULL));
    int percent;
    if (ship->navigation_tools->enemy->here == 0)
        my_putstr_color("red", "[SYSTEM FAILURE] : No enmey in the sector\n");
    else {
        if (my_strcmp(ship->weapon->system_state, "online") == 0) {
            ship->navigation_tools->enemy->enemy->life =
                ship->navigation_tools->enemy->enemy->life - ship->weapon->damage;
            percent = (rand() % 100);
        } else
            my_putstr_color("red","[SYSTEM FAILURE]: weapon out of order!\n");
    }
    if ((ship->navigation_tools->enemy->here) &&
        (ship->navigation_tools->enemy->enemy->life <= 0)) {
        ship->navigation_tools->enemy->here = 0;
        my_putstr_color("green", "Enemy is Dead GOOD JOB!\n");
        if(percent > 50)
             lost_energy(ship);
    }
}

void detect (ship_t *ship)
{
    
}
